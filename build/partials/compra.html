<div class="row partial-container shop-stage-buy">
  
  <div class="shopping-cart" ng-controller="shoppingCartController" ng-show="getCount()!=0">

    <!-- Menu -->
    <div class="status-compra">
      <div class="title-status step-1" ng-click="changeItemBuy(1)" ng-class="{'selected-status': itemselected === 1, 'unselected-status': itemselected != 1 }">CONFIRMAR ORDEN</div>
      <div class="title-status step-2" ng-click="changeItemBuy(2)" ng-class="{'selected-status': itemselected === 2, 'unselected-status': itemselected != 2 }">INFORMACIÓN DEL CLIENTE</div>
      <div class="title-status step-4" ng-click="changeItemBuy(3)" ng-class="{'selected-status': itemselected === 3, 'unselected-status': itemselected != 3 }">DATOS DE ENVÍO</div>
    </div>

    <!-- CONFIRMAR ORDEN  -->
    <div class="compra-wrapper show-form" ng-show="itemselected === 1">
      <div class="confirm-order">
        <h2 class="compra-title">CONFIRMAR ORDEN</h2>
        <div class="confirm-order-wrapper">
          <div class="confirm-order-top">
            <div class="top-title-order">CANTIDAD</div>
            <div class="top-title-order">PRODUCTO</div>
            <div class="top-title-order">PRECIO</div>
          </div>

          <ul class="order-products-list">
            <li class="order-product-item" ng-repeat="(key, data) in listCart">
              <div class="quantity-order">
                {{data.quantity}}
              </div>
              <div class="product-order">
                <div class="product-order-img">
                  <img src="./admin/src/images/{{data.productimage}}" alt="" />
                </div>
                <div class="product-info">
                  <span class="product-info-title">
                    {{data.productname | uppercase}}
                  </span>
                  <br><br>
                  <span class="product-size">
                    {{data.productquantity}} ml
                  </span>
                </div>
              </div>
              <div class="price-order">
                {{(data.productrealprice * data.quantity) | currency}}
              </div>
            </li>
          </ul>
        </div>
        <div class="total-price-table">
          <div class="row-price">
            <span class="info-row">Descuento</span>
            <span class="info-row" style="color: red">{{getPrice() - getDiscount() | currency}}</span>
          </div>
          <div class="row-price">
            <span class="info-row">Subtotal</span>
            <span class="info-row">{{getDiscount() | currency}}</span>
          </div>
          <div class="row-price">
            <span class="info-row">Envio</span>
            <span class="info-row">{{getShippingCost() | currency}}</span>
          </div>
          <br><br>
          <div class="row-price">
            <span class="info-row">TOTAL</span>
            <span class="info-row">{{getDiscount() + getShippingCost() | currency}}</span>
          </div>
        </div>
        <div class="button-next-wrapper">
          <span class="button-next" ng-click="changeStage(2)">
            SIGUIENTE
          </span>
        </div>
      </div>
    </div>

    <!-- INFORMACIÓN DEL CLIENTE -->
    <div class="compra-wrapper client-info-wrapper show-form" ng-show="itemselected === 2">
      <div class="client-info" ng-show="userDataLoaded">
        <h2 class="compra-title">INFORMACIÓN DEL CLIENTE</h2>
        <div class="user-data" ng-controller="selectedStatesCitiesController">
          <!-- Nombre -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>NOMBRE</span>
            </div>
            <div class="right-side-data">
              <input type="text" name="name" value="{{userData.username}}" class="profile-input" readonly="true" data-status="acepted" disabled>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- Apellido -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>APELLIDOS</span>
            </div>
            <div class="right-side-data">
              <input type="text" name="lastname" value="{{userData.userlastname}}" class="profile-input" readonly="true" data-status="acepted" disabled>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- E-MAIL -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>E-MAIL</span>
            </div>
            <div class="right-side-data">
              <input type="text" name="email" value="{{userData.useremail}}" data-email="{{userData.useremail}}" class="profile-input" readonly="true" data-status="acepted" disabled>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- Teléfono  -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>TELÉFONO</span>
            </div>
            <div class="right-side-data">
              <input type="tel" name="phone" value="{{userData.userphonenumber}}" class="profile-input" readonly="true" data-status="acepted" disabled >
              <span class="msgError"></span>
            </div>
          </div>
          <!-- ESTADO -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>ESTADO</span>
            </div>
            <div class="right-side-data">
              <select class="profile-input" readonly="true" ng-model="userState" ng-change="changeState(userState)" data-status="acepted" disabled name="state">
                <option ng-repeat="(key, data) in states" name="{{data.idEstados}}" value="{{data.idEstados}}">{{data.nombreEstado | uppercase}}</option>
              </select>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- CIUDAD -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>CIUDAD</span>
            </div>
            <div class="right-side-data">
              <select class="profile-input" readonly="true" ng-model="userCity" ng-change="changeCity(userCity)" data-status="acepted" disabled name="city">
                <option ng-repeat="(key, data) in cities" ng-if="data.Estados_idEstados ===  userState" name="{{data.idCiudades}}" value="{{data.idCiudades}}">{{data.nombreCiudad | uppercase}}</option>
              </select>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- CALLE -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>DIRECCIÓN</span>
            </div>
            <div class="right-side-data">
              <input type="text" name="address" value="{{userData.useraddress}}" class="profile-input" readonly="true" data-status="acepted" disabled>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- C.P. -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>CÓDIGO POSTAl</span>
            </div>
            <div class="right-side-data">
              <input type="tel" name="postalcode" value="{{userData.userzipcode}}" class="profile-input" readonly="true" data-status="acepted" disabled>
              <span class="msgError"></span>
            </div>
          </div>
        </div>
        <div class="button-next-wrapper">
          <span class="button-next" ng-click="changeStage(3)">
            SIGUIENTE
          </span>
        </div>
        <div class="message-goto-user">
          En dado caso de que tus datos sean incorrectos, ve a <a href="./#/profile">perfil</a> para cambiarlos. 
        </div>
      </div>
    </div>

    <!-- DATOS DE ENVÍO -->
    <div class="compra-wrapper envio-wrapper show-form" ng-show="itemselected === 3">
      <div class="forma-de-envio">
        <h2 class="compra-title">DATOS DE ENVÍO</h2>
        <div class="user-data" ng-controller="selectedStatesCitiesController">
          <!-- Teléfono  -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>TELÉFONO</span>
            </div>
            <div class="right-side-data">
              <input type="tel" name="phone" value="{{userData.userphonenumber}}" class="profile-input"  data-status="acepted" >
              <span class="msgError"></span>
            </div>
          </div>
          <!-- ESTADO -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>ESTADO</span>
            </div>
            <div class="right-side-data">
              <select class="profile-input" ng-model="userState" ng-change="changeState(userState)" data-status="acepted" name="state">
                <option ng-repeat="(key, data) in states" name="{{data.idEstados}}" value="{{data.idEstados}}">{{data.nombreEstado | uppercase}}</option>
              </select>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- CIUDAD -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>CIUDAD</span>
            </div>
            <div class="right-side-data">
              <select class="profile-input" ng-model="userCity" ng-change="changeCity(userCity)" data-status="acepted" name="city">
                <option ng-repeat="(key, data) in cities" ng-if="data.Estados_idEstados ===  userState" name="{{data.idCiudades}}" value="{{data.idCiudades}}">{{data.nombreCiudad | uppercase}}</option>
              </select>
              <span class="msgError"></span>
            </div>
          </div>
          <!-- CALLE -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>DIRECCIÓN</span>
            </div>
            <div class="right-side-data">
              <input type="text" name="address" value="{{userData.useraddress}}" class="profile-input" data-status="acepted">
              <span class="msgError"></span>
            </div>
          </div>
          <!-- REFERENCIA -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>REFERENCIAS</span>
            </div>
            <div class="right-side-data">
              <input type="text" name="address" value="" class="profile-input" data-status="denied">
              <span class="msgError"></span>
            </div>
          </div>
          <!-- C.P. -->
          <div class="user-data-row">
            <div class="left-side-data">
              <span>CÓDIGO POSTAl</span>
            </div>
            <div class="right-side-data">
              <input type="tel" name="postalcode" value="{{userData.userzipcode}}" class="profile-input" data-status="acepted">
              <span class="msgError"></span>
            </div>
          </div>
        </div>
        <div class="button-paypal-wrapper">
          <div><img src=""></div>
          <div><img src="./src/images/button_paypal01.png"></div>
        </div>
        <div class="message-goto-user">
          Puedes cambiar tu dirección de envió en dado caso de que no quieras que tu compra sea entregada en tu propio domicilio. 
        </div>
      </div>
    </div>
  
  </div>

  <div class="containerCart" ng-show="getCount()==0">
    <div class="itemMessage">
      <span>Aún no tienes productos agregados al carrito.</span>
    </div>
  </div>

</div>

